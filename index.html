<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Friend Calling</title>
    <style>
        body { margin: 0; font-family: sans-serif; background: #121212; color: white; height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        
        /* –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ (–≤–∏–¥–µ–Ω —Å—Ä–∞–∑—É) */
        #login-screen { 
            text-align: center; 
            background: #1e1e1e; 
            padding: 40px; 
            border-radius: 20px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        /* –≠–∫—Ä–∞–Ω –∑–≤–æ–Ω–∫–∞ (—Å–∫—Ä—ã—Ç) */
        #app-screen { display: none; width: 100%; height: 100%; }
        iframe { width: 100%; height: 100%; border: none; }
        
        h1 { margin-bottom: 10px; }
        p { color: #888; margin-bottom: 30px; }
    </style>
</head>
<body>

    <div id="login-screen">
        <h1>üîíClosed</h1>
        <p>–í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Telegram, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å</p>

        <script async src="https://telegram.org/js/telegram-widget.js?22" 
                data-telegram-login="FriendCalling_bot" 
                data-size="large" 
                data-radius="10" 
                data-onauth="onTelegramAuth(user)" 
                data-request-access="write"></script>
    </div>

    <div id="app-screen">
        <iframe src="https://whereby.com/potemochkin-party?minimal=on" allow="camera; microphone; fullscreen; speaker"></iframe>
        
        <div style="position:absolute; top:10px; left:10px; background:rgba(0,0,0,0.5); padding:5px 10px; border-radius:5px;">
            üë§ <span id="username-display">–ì–æ—Å—Ç—å</span>
        </div>
    </div>

    <script>
        // –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò, –∫–æ–≥–¥–∞ –¢–µ–ª–µ–≥—Ä–∞–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –≤—Ö–æ–¥
        function onTelegramAuth(user) {
            console.log("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω:", user);
            
            // 1. –ü—Ä—è—á–µ–º —ç–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞
            document.getElementById('login-screen').style.display = 'none';
            
            // 2. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∑–≤–æ–Ω–∫–∞
            document.getElementById('app-screen').style.display = 'block';
            
            // 3. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            document.getElementById('username-display').innerText = user.first_name + " " + (user.last_name || "");
            
            // (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –°–æ—Ö—Ä–∞–Ω—è–µ–º, —á—Ç–æ –æ–Ω –≤–æ—à–µ–ª, —á—Ç–æ–±—ã –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ –ø—Ä–æ—Å–∏–ª–æ —Å–Ω–æ–≤–∞
            // localStorage.setItem('tg_user', JSON.stringify(user));
        }
    </script>

</body>
</html>
